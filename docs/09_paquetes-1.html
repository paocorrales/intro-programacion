<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.47">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Paola Corrales y Yanina Bellini Saibene">
<title>10&nbsp; Empaquetando funciones – Introducción a la Programación II</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./10_documentacion.html" rel="next">
<link href="./08_git-2.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
</head>
<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./09_paquetes-1.html"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Empaquetando funciones</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Introducción a la Programación II</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/rse-r/intro-programacion" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <a href="./Introducción-a-la-Programación-II.pdf" title="Download PDF" class="quarto-navigation-tool px-1" aria-label="Download PDF"><i class="bi bi-file-pdf"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Prefacio</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./00_intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Presentación</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01_proyectos.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Entorno de trabajo</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02_lectura.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Lectura de datos ordenados</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03_manipulacion-1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Manipulación de datos ordenados I</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04_git-1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">git para trabajar individualmente</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05_graficos.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Graficado datos</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06_manipulacion-2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Manipulación de datos ordenados II</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07_funciones.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Funciones</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08_git-2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Git para trabajar en equipo</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09_paquetes-1.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Empaquetando funciones</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10_documentacion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Documentando paquetes y funciones</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11_errores.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Dependencias y tests</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12_contribuir.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Contribuir y aceptar contribuciones</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./A_instalacion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Preparando el entorno de trabajo</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./B_config_pk.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">Configuración para desarrollar paquetes</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./C_soluciones.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">C</span>&nbsp; <span class="chapter-title">Soluciones de ejercicios</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./D_checklist.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">D</span>&nbsp; <span class="chapter-title">Checklist para revisar el paquete</span></span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li><a href="#objetivos-de-aprendizaje" id="toc-objetivos-de-aprendizaje" class="nav-link active" data-scroll-target="#objetivos-de-aprendizaje"><span class="header-section-number">10.1</span> Objetivos de aprendizaje</a></li>
  <li><a href="#por-qu%C3%A9-crear-un-paquete-r" id="toc-por-qué-crear-un-paquete-r" class="nav-link" data-scroll-target="#por-qu%C3%A9-crear-un-paquete-r"><span class="header-section-number">10.2</span> ¿Por qué crear un paquete R?</a></li>
  <li><a href="#qu%C3%A9-es-un-paquete-r" id="toc-qué-es-un-paquete-r" class="nav-link" data-scroll-target="#qu%C3%A9-es-un-paquete-r"><span class="header-section-number">10.3</span> ¿Qué es un paquete R?</a></li>
  <li>
<a href="#nombrar-un-paquete" id="toc-nombrar-un-paquete" class="nav-link" data-scroll-target="#nombrar-un-paquete"><span class="header-section-number">10.4</span> Nombrar un paquete</a>
  <ul class="collapse">
<li><a href="#requisitos-formales" id="toc-requisitos-formales" class="nav-link" data-scroll-target="#requisitos-formales"><span class="header-section-number">10.4.1</span> Requisitos formales</a></li>
  </ul>
</li>
  <li>
<a href="#estructura-de-un-paquete" id="toc-estructura-de-un-paquete" class="nav-link" data-scroll-target="#estructura-de-un-paquete"><span class="header-section-number">10.5</span> Estructura de un paquete</a>
  <ul class="collapse">
<li><a href="#completando-el-archivo-description" id="toc-completando-el-archivo-description" class="nav-link" data-scroll-target="#completando-el-archivo-description"><span class="header-section-number">10.5.1</span> Completando el archivo DESCRIPTION</a></li>
  </ul>
</li>
  <li>
<a href="#flujo-de-trabajo-para-el-desarrollo-de-paquetes" id="toc-flujo-de-trabajo-para-el-desarrollo-de-paquetes" class="nav-link" data-scroll-target="#flujo-de-trabajo-para-el-desarrollo-de-paquetes"><span class="header-section-number">10.6</span> Flujo de trabajo para el desarrollo de paquetes</a>
  <ul class="collapse">
<li><a href="#datos-en-paquetes" id="toc-datos-en-paquetes" class="nav-link" data-scroll-target="#datos-en-paquetes"><span class="header-section-number">10.6.1</span> Datos en paquetes</a></li>
  <li><a href="#ex-paquete" id="toc-ex-paquete" class="nav-link" data-scroll-target="#ex-paquete"><span class="header-section-number">10.6.2</span> Construyendo un paquete de R paso a paso</a></li>
  </ul>
</li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title">
<span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Empaquetando funciones</span>
</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header><section id="objetivos-de-aprendizaje" class="level2" data-number="10.1"><h2 data-number="10.1" class="anchored" data-anchor-id="objetivos-de-aprendizaje">
<span class="header-section-number">10.1</span> Objetivos de aprendizaje</h2>
<ul>
<li>Identificar cuándo y por qué crear un paquete R.</li>
<li>Conocer y utilizar los paquetes R <a href="https://devtools.r-lib.org/">devtools</a> y <a href="https://usethis.r-lib.org">usethis</a> para automatizar y agilizar muchas de las tareas de desarrollo de paquetes.</li>
<li>Aprende a crear un nuevo paquete R utilizando <code><a href="https://usethis.r-lib.org/reference/create_package.html">usethis::create_package()</a></code>.</li>
<li>Describir y explicar la finalidad de las carpetas y archivos de un paquete de R.</li>
<li>Aprender cómo y por qué puedes añadir datos a un paquete de R.</li>
</ul></section><section id="por-qué-crear-un-paquete-r" class="level2" data-number="10.2"><h2 data-number="10.2" class="anchored" data-anchor-id="por-qué-crear-un-paquete-r">
<span class="header-section-number">10.2</span> ¿Por qué crear un paquete R?</h2>
<p>El objetivo principal del desarrollo de software es simplificar alguna tarea o un conjunto de tareas para vos y para los demás (como tu equipo, u otras personas que usen tu trabajo). Esto también se aplica al desarrollo de software en R. Crear un paquete R es una de las formas más potentes de simplificar tareas, independientemente de lo sencillas o complejas que sean.</p>
<p>A lo largo de esta sección mostraremos que crear y desarrollar un programa R no es tan difícil como parece a primera vista. Pero antes de hacer un paquete, tenes que definir algunas cosas. Por ejemplo, ¿cómo determinar si tiene sentido hacer un paquete R? Respondé a las siguientes preguntas:</p>
<ul>
<li>¿Creaste alguna vez una función, por sencilla que sea?</li>
<li>¿Utilizaste esa función más de una vez en más de un proyecto o archivo, ya sea copiándola y pegándola o utilizando el archivo que que la contiene?</li>
</ul>
<p>Si respondiste afirmativamente a estas dos preguntas, entonces deberías crear un paquete R para esa función. Pero puede que te preguntes, ¿por qué hacer un paquete con una sola función? Porque nunca se acaba con <em>sólo</em> una función, es muy probable sumes otras a tu trabajo. Aparte de empaquetar las funciones de R, si tienes conjuntos de datos pequeños o medianos que utilizas en varios proyectos o archivos, puedes incluso empaquetar los datos.</p>
<p>Además, hacer un paquete de R ahora es mucho más fácil que en el pasado. Esto se debe en gran parte a otros paquetes de R como <a href="https://devtools.r-lib.org/">devtools</a> y <a href="https://usethis.r-lib.org">usethis</a> que están diseñados para simplificar el desarrollo de paquetes. A esto se suman recursos gratuitos como libros y blogs y páginas en Internet para aprender a crear paquetes R y hacer desarrollo de software en R.</p>
<p>Crear un paquete R y publicarlo en GitHub o en CRAN como parate de trabajo científico, un proyecto o análisis ayuda a su reproducibilidad. Esto se debe a que hacer un paquete de R suele requerir un mayor nivel de rigor, tests, documentación y inspección del código, lo que significa que tú y los demás podrán confiar más en en los resultados. Y si está en GitHub, es mucho más fácil compartir tu trabajo. con otras pesonas y lo lograr que tu trabajo tenga mayor impacto en general.</p>
</section><section id="qué-es-un-paquete-r" class="level2" data-number="10.3"><h2 data-number="10.3" class="anchored" data-anchor-id="qué-es-un-paquete-r">
<span class="header-section-number">10.3</span> ¿Qué es un paquete R?</h2>
<p>Para entender qué es un paquete R, daremos un paso atrás y consideraremos lo que ocurre cuando interactuamos con R. El primer acercamiento a R es a través de la consola, donde escribís funciones en R para realizar tareas que que se imprimen en pantalla. Si no cambiaste la configuración inicial esa sesión de R correrar en tu carpeta raiz, normalmente algo parecido a <code>/home/username/</code> en Linux, <code>/Users/username/</code> para macOS, o <code>C:\Users\username</code> para Windows. Así que cualquier dato o gráfico que guardes o importes debe incluir la ruta del archivo a la ubicación correcta. Desde un punto de vista reproducible y modular esto va en contra de las buenas prácticas. Asimismo, el código de R qeu escribas en la consola no se guarda en ningún lado. Por tanto, no podés reutilizarlo o compartirlo fácilmente.</p>
<p>El siguiente nivel es guardar el código en un scriptde R (un archivo almacenado en cualquier lugar en el ordenador que termina en <code>.R</code>) y hacer que R ejecute este código en secuencia. En el pasado, la gente podía escribir scripts de R en editores de texto como vim, emacs o Notepad, y ejecutar manualmente el script en la consola de R. En la actualidad, la mayoría de la gente utiliza un Entorno de Desarrollo Integrado (IDE) como RStudio o VS Code. Este es el método más utilizado para realizar cualquier tipo de trabajo en R. Teóricamente, el código escrito de esta forma es reproducible y se puede compartir. Sin embargo, en la práctica, las personas escriben código de manera secuencial, resolviendo un problema luego del otro y trabajan con R de forma más interactiva que programáticamente. El directorio de trabajo de un script R en este caso no está definido, por lo que seguimos encontrando problemas similares a los que tenemos al usar la consola. Si bien se puede almacenar código o funciones de R en un script y <em>cargarlas</em> con <code><a href="https://rdrr.io/r/base/source.html">source()</a></code> desde otros scripts, esto implica hacer un seguimiento de los archivos con estas funciones y actualizarlos cuando corresponda.</p>
<p>Un paquete de R no es muy diferente de utilizar varios scripts. Existen ciertas expectativas y convenciones que deben seguirse para para que que el paquete se “instale” en tu computadora y quede disponible como paquete. Algunas de estas convenciones son:</p>
<ul>
<li><p>Debe haber un archivo llamado <code>DESCRIPTION</code> que contiene los metadatos necesarios para que R sepa cómo instalar el paquete. Veremos qué debe incluir más adelante.</p></li>
<li><p>Debe haber una carpeta llamada <code>R/</code>. Normalmente sólo contendrá archivos <code>.R</code> y sólo incluirán las funciones que hayas creado. Veremos como incorporar las funciones que ya tenemos dentro de un paquete.</p></li>
<li><p>Debe haber un archivo <code>NAMESPACE</code> que contenga la lista de funciones de tu paquete que esten disponibles para ser usadas. Este archivo se gestiona automáticamente con funciones de <a href="https://devtools.r-lib.org/">devtools</a> y <a href="https://roxygen2.r-lib.org/">roxygen2</a>.</p></li>
<li><p>La carpeta que contiene todo, aunque no es obligatorio debería llamarse como el paquete. Por ejemplo, el paquete <a href="https://usethis.r-lib.org">usethis</a> tiene el nombre de carpeta <code>usethis/</code>. Esto no es un requisito explícito, pero es muy recomendable. R determina el nombre del paquete a partir del campo <code>Package:</code> en el archivo <code>DESCRIPTION</code>.</p></li>
</ul>
<p>Nada de esto es algo de lo que tengas que preocuparte realmente porque los paquetes <a href="https://usethis.r-lib.org">usethis</a> y <a href="https://devtools.r-lib.org/">devtools</a> están diseñados para hacer muchas de estas tareas de configuración de paquetes por ti, o al menos simplificarlas.</p>
<p>¿Cómo funciona la instalación de paquetes? Cuando le dices a R que instale un paquete, que es un conjunto de archivos y carpetas que siguen un convención específica, R toma la carpeta y la convierte en un formato especial. Luego R guarda este formato especial en una ubicación por defecto que es específica del sistema operativo, como macOS, Windows o Linux. Para ver dónde están instalados los paquetes, utiliza</p>
<div class="cell">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/libPaths.html">.libPaths</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "C:/Users/tonin/AppData/Local/R/win-library/4.4"
[2] "C:/Program Files/R/R-4.4.0/library"            </code></pre>
</div>
</div>
<p>Si escribes esto en tu Consola, lo que verás probablemente será un un poco diferente a esto. Si <code><a href="https://rdrr.io/r/base/libPaths.html">.libPaths()</a></code> muestra más de una ruta, normalmente la primera contendrá todos los paquetes.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] 330</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>C:/Users/tonin/AppData/Local/R/win-library/4.4/abind
C:/Users/tonin/AppData/Local/R/win-library/4.4/agroclimatico
C:/Users/tonin/AppData/Local/R/win-library/4.4/askpass
C:/Users/tonin/AppData/Local/R/win-library/4.4/assertthat
C:/Users/tonin/AppData/Local/R/win-library/4.4/audio
C:/Users/tonin/AppData/Local/R/win-library/4.4/automap</code></pre>
</div>
</div>
<p>Si queremos ver cómo almacena R los paquetes en su formato especial, podemos utilizar <code>dir_tree()</code> y el contenido de la instalación de <code>devtools/</code>.</p>
<div class="cell">
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">primary_library_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/libPaths.html">.libPaths</a></span><span class="op">(</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span><span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/dir_tree.html">dir_tree</a></span><span class="op">(</span><span class="fu">path</span><span class="op">(</span><span class="va">primary_library_path</span>, <span class="st">"devtools"</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>C:/Users/tonin/AppData/Local/R/win-library/4.4/devtools
├── DESCRIPTION
├── doc
│   ├── dependencies.html
│   ├── dependencies.Rmd
│   └── index.html
├── help
│   ├── aliases.rds
│   ├── AnIndex
│   ├── devtools.rdb
│   ├── devtools.rdx
│   ├── figures
│   │   ├── lifecycle-archived.svg
│   │   ├── lifecycle-defunct.svg
│   │   ├── lifecycle-deprecated.svg
│   │   ├── lifecycle-experimental.svg
│   │   ├── lifecycle-maturing.svg
│   │   ├── lifecycle-questioning.svg
│   │   ├── lifecycle-stable.svg
│   │   ├── lifecycle-superseded.svg
│   │   └── logo.svg
│   └── paths.rds
├── html
│   ├── 00Index.html
│   └── R.css
├── INDEX
├── LICENSE
├── MD5
├── Meta
│   ├── features.rds
│   ├── hsearch.rds
│   ├── links.rds
│   ├── nsInfo.rds
│   ├── package.rds
│   ├── Rd.rds
│   └── vignette.rds
├── NAMESPACE
├── NEWS.md
├── R
│   ├── devtools
│   ├── devtools.rdb
│   └── devtools.rdx
├── rstudio
│   └── addins.dcf
└── WORDLIST</code></pre>
</div>
</div>
<p>Los archivos <code>R/devtools.rdb</code> y <code>R/devtools.rdx</code> son los archivos cons formatos especiales que contienen las funciones dentro de <a href="https://devtools.r-lib.org/">devtools</a> que R buscará cuando carga el paquete. Cuando se instala un paquete en R, se crea una carpeta en <code><a href="https://rdrr.io/r/base/libPaths.html">.libPaths()</a></code> con los archivos en el formato específico que necesita R. Así que cuando ejecutes <code><a href="https://devtools.r-lib.org/">library(devtools)</a></code>, R sabrá que debe buscar las funciones que se encuentran en la carpeta <code>devtools/</code>.</p>
<p>Por lo tanto, instalar tu propio paquete que sólo se encuentra en tu computadora (es decir, no está publicado en CRAN o en GitHub) no es no difiere de instalar un paquete de CRAN con <code><a href="https://rdrr.io/r/utils/install.packages.html">install.packages()</a></code> o desde GitHub con <code><a href="https://pak.r-lib.org/reference/pak.html">pak::pak()</a></code>. La única diferencia es que los paquetes en CRAN o GitHub pueden ser utilizados por cualquiera que tenga acceso a internet.</p>
<div class="importante">
<p>Te habrás dado cuenta de que hemos utilizado la sintaxis <code>nombrepaquete::nombrefuncion()</code> unas cuantas veces. Esto le dice a R que utilice la función de un paquete concreto. Así que <code><a href="https://pak.r-lib.org/reference/pak.html">pak::pak()</a></code> es decirle a R que utilice la función <code>pak()</code> del paquete <code>pak</code>. En desarrollo de paquetes en particular, utilizaremos esto en lugar de cargar las librerias con <code><a href="https://pak.r-lib.org/">library(pak)</a></code> porque queremos ser explícitos sobre qué función queremos utilizar y porque no necesitamos cargar todas las funciones del paquete cuando sólo queremos utilizar una o dos.</p>
</div>
</section><section id="nombrar-un-paquete" class="level2" data-number="10.4"><h2 data-number="10.4" class="anchored" data-anchor-id="nombrar-un-paquete">
<span class="header-section-number">10.4</span> Nombrar un paquete</h2>
<p>Crear un paquete no es complicado. Lo complicado es es <em>nombrar</em> el paquete. Crear un nombre significativo, que la gente recuerde y que se pueda buscar en Google es <em>realmente difícil</em>. No hay una manera fácil de y a menudo requiere varios días de pensar opciones. Pero además hay que asegurarse de que el nombre que estamos pensando usar no lo esté usando alguien más. Esto se puede hacer con el paquete <code>pak</code>. Por ahora para revisar el paso a paso para crear un paquete usaremos <code>paqueteprueba</code> como nombre. Revisemos si está disponible</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>╔══════════════════════════════════════════════════════════════════════════════╗
║                             –*– paqueteprueba –*–                            ║
╚══════════════════════════════════════════════════════════════════════════════╝
┌──────────────────────────────────────────────────────────────────────────────┐
│ ✔  valid name      ✔  CRAN            ✔  Bioconductor    ✔  not a profanity  │
└──────────────────────────────────────────────────────────────────────────────┘
┌ Wikipedia ───────────────────────────────────────────────────────────────────┐
│ Paqueteprueba No definition found                                            │
└──────────────────────────────────────────────────────────────────────────────┘
┌ Wiktionary ──────────────────────────────────────────────────────────────────┐
│ paqueteprueba No English definition found                                    │
└──────────────────────────────────────────────────────────────────────────────┘
┌──────────────────────────────────────────────────────────────────────────────┐
│ Sentiment: :| (0)                                                            │
└──────────────────────────────────────────────────────────────────────────────┘</code></pre>
</div>
</div>
<p>En este caso <code>paqueteprueba</code> está disponible para que lo usemos.</p>
<section id="requisitos-formales" class="level3" data-number="10.4.1"><h3 data-number="10.4.1" class="anchored" data-anchor-id="requisitos-formales">
<span class="header-section-number">10.4.1</span> Requisitos formales</h3>
<p>Existen tres requisitos formales:</p>
<ol type="1">
<li>El nombre sólo puede estar formado por letras, números y puntos, es decir, .</li>
<li>Debe empezar por una letra.</li>
<li>No puede terminar con un punto.</li>
</ol>
<p>Lamentablemente, esto significa que no puede utilizar guiones ni guiones bajos, es decir, - o _, en el nombre del paquete. Desaconsejamos el uso de puntos en los nombres de paquetes, para evitar que se confunda con extensiones de archivos y métodos S3.</p>
</section></section><section id="estructura-de-un-paquete" class="level2" data-number="10.5"><h2 data-number="10.5" class="anchored" data-anchor-id="estructura-de-un-paquete">
<span class="header-section-number">10.5</span> Estructura de un paquete</h2>
<p>Ahora que tenemos un nombre, el siguiente paso es configurar la infraestructura básica para el paquete. Afortunadamente, el paquete <code>usethis</code> ayuda resolver gran parte del trabajo. Cuando usemosla función <code><a href="https://usethis.r-lib.org/reference/create_package.html">usethis::create_package()</a></code> configurará los archivos y carpetas básicos que necesitamos para crear un paquete y que R lo instale como tal. Utilizaremos esta función para crear el paquete <code>paqueteprueba</code>.</p>
<div class="cell">
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="https://usethis.r-lib.org/reference/create_package.html">create_package</a></span><span class="op">(</span>path <span class="op">=</span> <span class="st">"~/Documentos/Courses/paqueteprueba"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>En este caso estamos creando el paquete en la carpeta Documentos, pero también podríamos crearlo en cualquier otra carpeta. Esta linea de código además se corre en la consola, no tendría sentido que corra en un script ya que no es algo que haremos todos los días. El resultado es el siguiente</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>✔ Creating <span class="st">'C:/Users/tonin/Documentos/paqueteprueba/'</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>✔ Setting active project to <span class="st">'C:/Users/tonin/Documentos/paqueteprueba'</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>✔ Creating <span class="st">'R/'</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>✔ Writing <span class="st">'DESCRIPTION'</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>Package<span class="sc">:</span> paqueteprueba</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>Title<span class="sc">:</span> What the Package <span class="fu">Does</span> (One Line, Title Case)</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>Version<span class="sc">:</span> <span class="dv">0</span>.<span class="dv">0</span>.<span class="fl">0.9000</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>Authors<span class="sc">@</span><span class="fu">R</span> (parsed)<span class="sc">:</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>    <span class="er">*</span> First Last <span class="sc">&lt;</span>first.last<span class="sc">@</span>example.com<span class="sc">&gt;</span> [aut, cre] (YOUR<span class="sc">-</span>ORCID<span class="sc">-</span>ID)</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>Description<span class="sc">:</span> What the package <span class="fu">does</span> (one paragraph).</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>License<span class="sc">:</span> <span class="st">`</span><span class="at">use_mit_license()</span><span class="st">`</span>, <span class="st">`</span><span class="at">use_gpl3_license()</span><span class="st">`</span> or friends to</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>    pick a license</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>Encoding<span class="sc">:</span> UTF<span class="dv">-8</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>Roxygen<span class="sc">:</span> <span class="fu">list</span>(<span class="at">markdown =</span> <span class="cn">TRUE</span>)</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>RoxygenNote<span class="sc">:</span> <span class="dv">7</span>.<span class="fl">3.1</span></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>✔ Writing <span class="st">'NAMESPACE'</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>✔ Writing <span class="st">'paqueteprueba.Rproj'</span></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>✔ Adding <span class="st">'^paqueteprueba</span><span class="sc">\\</span><span class="st">.Rproj$'</span> to <span class="st">'.Rbuildignore'</span></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>✔ Adding <span class="st">'.Rproj.user'</span> to <span class="st">'.gitignore'</span></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>✔ Adding <span class="st">'^</span><span class="sc">\\</span><span class="st">.Rproj</span><span class="sc">\\</span><span class="st">.user$'</span> to <span class="st">'.Rbuildignore'</span></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>✔ Opening <span class="st">'C:/Users/tonin/Documentos/paqueteprueba/'</span> <span class="cf">in</span> new RStudio session</span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>✔ Setting active project to <span class="st">'&lt;no active project&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Donde sea que hayas creado el paquete ahora tendrás una carpeta llamada <code>paqueteprueba</code> con los archivos mínimos para instalar el paquete. Esta carpeta es al mismo tiempo un projecto de RStudio, es es porque estamos usando usethis y RStudio y viene con todas las ventajas que vimos. Sin embargo, no es impresindible que un paquete sea un proyecto al mismo tiempo. usethis tiene aún otra ventaja más, inicia automáticamente un repositorio. Esto es importantísimo, desarrollar software viene de la mano del control de versiones. Además, si estuvieramos creando un paquete de verdad, contectar este repositorio local con uno remoto en GitHub o GitLab es necesario para distribuir tu paquete y que lo puedan usar otras personas.</p>
<div class="cell">
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/dir_tree.html">dir_tree</a></span><span class="op">(</span><span class="st">"C:/Users/tonin/Documents/Courses/paqueteprueba/"</span>, all <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>C:/Users/tonin/Documents/Courses/paqueteprueba/
├── .git
│   ├── COMMIT_EDITMSG
│   ├── config
│   ├── description
│   ├── FETCH_HEAD
│   ├── HEAD
│   ├── hooks
│   │   └── README.sample
│   ├── index
│   ├── info
│   │   └── exclude
│   ├── logs
│   │   ├── HEAD
│   │   └── refs
│   │       ├── heads
│   │       │   └── master
│   │       └── remotes
│   │           └── origin
│   │               ├── gh-pages
│   │               └── master
│   ├── objects
│   │   ├── 02
│   │   │   └── 4b0f9c5bf211c6afc136da0576bf55edf62f71
│   │   ├── 03
│   │   │   └── bb3fc049ce3d6f6d582d27a760ac393a7cf3c2
│   │   ├── 05
│   │   │   └── 9a94e2fd7a6144d1496157ce0c21e39fcde121
│   │   ├── 07
│   │   │   └── bf23c79f450c347e76116619a47f41487dd812
│   │   ├── 09
│   │   │   └── 7b241637da023174b0f2e3715bd0291d9ded37
│   │   ├── 0c
│   │   │   └── 1b65dfc587a5ba5ffbd5556da30ba3fd827753
│   │   ├── 0d
│   │   │   └── 68164c22af0517a3ee797e694642f207406d5f
│   │   ├── 0e
│   │   │   └── caf06d8c625646dc8cf48d46e92b69e7e8ece0
│   │   ├── 0f
│   │   │   └── 01ceb3d5a8810e3850eef27dd1b539b2277b0a
│   │   ├── 11
│   │   │   └── 03f811ed80f17985ecf61e0d50e3359484244f
│   │   ├── 12
│   │   │   ├── 0fa614d537069670638395863804ba384d9f13
│   │   │   └── 392edc2990d79f77b9f142a692e5ac5459d629
│   │   ├── 13
│   │   │   └── 204ea60fce6d3f67688a97707d5afb6631bb99
│   │   ├── 14
│   │   │   └── b591ffc2fe502b9073e28488ecc6c3dd09b643
│   │   ├── 17
│   │   │   ├── f5b68f382167e8e8b68e06904c0dee35148a52
│   │   │   └── f70c9e31823307a2e94c2599e84937ea528fa7
│   │   ├── 1a
│   │   │   ├── 99c65f5c77074bca64513ec5a95f2b0d3a99e5
│   │   │   ├── aee56e290f0d5028ec350ed6f5327ebe6276b2
│   │   │   └── dd63c77c46e246a33119eac95574a406ab5480
│   │   ├── 1e
│   │   │   ├── 67f5dde50dd83bafe2e844ba95dd58a8fec3bd
│   │   │   ├── d98734ca47bc2ef75f6693e9f588c90ec70718
│   │   │   └── ea05338954a09dbb1f09bb067d7813e3d97b4b
│   │   ├── 20
│   │   │   ├── 55116a3922554f910f2f8665bc43bde3eb0d32
│   │   │   ├── 651d9fdcef2c0d4f41fa686df195c67c55070e
│   │   │   ├── a3582ac0a5849fa4e27b827fdf8d773b9030f6
│   │   │   └── c2086edeacc9a02b427baf6d25d8de568bbb08
│   │   ├── 23
│   │   │   └── b1c47ba29581512bbffdf82a9d88fb898faee6
│   │   ├── 24
│   │   │   ├── 1b7b116e75ded19c636ccec50f00fa2723e44c
│   │   │   └── 5106d5064051562de496a102323748713a42c5
│   │   ├── 2a
│   │   │   └── 892af5b363195d8c25c5990e24a76a47572fb0
│   │   ├── 2b
│   │   │   └── db1fa0fac0382c7cf0f618efb0d2ec1c1e5d88
│   │   ├── 2d
│   │   │   └── 19fc766d98a08d9d1437896bfb008a7b15f340
│   │   ├── 2e
│   │   │   └── f6af19c05d8621f5a8489bcef540e8e66b5318
│   │   ├── 2f
│   │   │   └── a46cf36a5578ba373a5c7e381c71f5781cef68
│   │   ├── 30
│   │   │   └── f55b7435491ed4c2b11de8ab5e5c7e1e1ed669
│   │   ├── 34
│   │   │   ├── 0ec989d9d7e9bf488f2e3dada00d02f2ec8a9e
│   │   │   └── 3a75a68c2a1c89c2fb2f0ab178c70479ea79ad
│   │   ├── 38
│   │   │   └── 63da8b7fc1ff8bde216be07ac7da1afe39cf34
│   │   ├── 39
│   │   │   ├── 26dc5382a1bf8fa47cda2ed77d4d8794c01874
│   │   │   └── cc346e3658b39b6511f63b34cadc3ef8599ca9
│   │   ├── 3a
│   │   │   ├── 5a31bdbcdfc843ea305a385760feaf8f99998c
│   │   │   └── cfe81965cbe71a031cb0aed0774293b657b599
│   │   ├── 3c
│   │   │   └── 09f354b2f91522fb358c669fc047817626f0de
│   │   ├── 3d
│   │   │   └── 2cfe3d1a1115faf88f2cac754e53995cf4546b
│   │   ├── 3e
│   │   │   ├── 6cc2705ccca30f30d4652a2db3fa6b0e3cc37a
│   │   │   ├── 7abe15eec6831cec9b96a90cbc6c478f512d6c
│   │   │   └── eaa94dd310ba54d1787898858fcac48c18bc17
│   │   ├── 40
│   │   │   ├── 1aa37448f81927b0dfea09fc0d25fb3707071c
│   │   │   └── b0809ce077384027dcf5f8899a9baaa9e534b1
│   │   ├── 42
│   │   │   ├── 88df62f2996d76084c43b9048889fa9125cc10
│   │   │   └── d7e967fc408e5fe0b710576bda3c8bf434fdf4
│   │   ├── 43
│   │   │   └── 3069fda07b214edb5df87941130d5ca4aad906
│   │   ├── 44
│   │   │   ├── 3b1ea8301d0b6593c7a66b2db38b964fb86988
│   │   │   ├── 55e17cb7a2467313e227cde61e9e29ca47ac55
│   │   │   └── b7b6b302247fbe911cee3463f59603edf543f9
│   │   ├── 46
│   │   │   └── cb4aec80078d4bfc7e223b8c92640c5a8b478f
│   │   ├── 4b
│   │   │   ├── 825dc642cb6eb9a060e54bf8d69288fbee4904
│   │   │   └── bce7508094d25e785c53b2098872d5ab3edbdf
│   │   ├── 4c
│   │   │   ├── 02b4db750926281d04633a920d7f4ad093b8ae
│   │   │   └── 220a2d3090d217db4623a3890ac2070dc9c859
│   │   ├── 50
│   │   │   └── 34b64c2c7a23f7a44d77ecf7f56d1b582d1b37
│   │   ├── 54
│   │   │   └── 0d22fca2efaec6f08943117e68d591a2264466
│   │   ├── 59
│   │   │   ├── 782d5f0c137bc7ef8f3405771335a11d99cd34
│   │   │   └── fceec2f6292e0a6b217b6eecf74faf576f8888
│   │   ├── 5a
│   │   │   ├── 266908f7d21b9c6aff48ba292e009909b650c0
│   │   │   ├── 4c2d86c3f62bd870ab04d841794f4373a19637
│   │   │   └── 66dc2ff56d5e3617f0116bf106f3d93c9d5c4e
│   │   ├── 5b
│   │   │   └── 2a05d6c65c2f35a5f3ab3cd7375e4845cce64d
│   │   ├── 5d
│   │   │   ├── 2d7c55fcec900cfe39c5b3ebd0f0fdfae1232b
│   │   │   └── 96aa0d0143d9b8dd74fa3e193b2f455cfe86bc
│   │   ├── 62
│   │   │   └── 12fd67e3361189cc6ed823f95d7d4022a79057
│   │   ├── 63
│   │   │   └── d4c8b6fcb6a596e9550ceb22e907d2a9b4bfbb
│   │   ├── 64
│   │   │   ├── 89ce3acb5381b762a2bf4b71d77cf1e8eb80d3
│   │   │   └── e4e8d83568eb017c001b576431e4ea1f03f11e
│   │   ├── 65
│   │   │   └── 028400c5df2a59eff4a6b8d5de3caef61019d4
│   │   ├── 66
│   │   │   └── 04a0677c226d850f94099c7f1be1bbba73c227
│   │   ├── 69
│   │   │   ├── 3c37abb3db7f239b8fa5679a28790332471748
│   │   │   ├── a910fd78851edd93184c5aebc5e0e1cb9ad6e6
│   │   │   └── fafd4b6dddad27500cfc67efb9fb16e86a96bd
│   │   ├── 6a
│   │   │   ├── cd4edd8f85d86f4b71f7aeaff2f32fd2d94df4
│   │   │   └── e926839dd1829f1016a96f766d970ff184ad97
│   │   ├── 6b
│   │   │   └── 7d31a1fd5c88b6c8ed38878086593168d899a9
│   │   ├── 6c
│   │   │   └── 091b2921449f18808bbe1f84c62162738a2b4b
│   │   ├── 6d
│   │   │   └── 7d732814d8d41f8df2d7ddf8495095a24fe546
│   │   ├── 6e
│   │   │   ├── 509c599e415c54a097d0eafa5a20366fe020ea
│   │   │   └── a495f23c05753f6e67a0861bcd74d836d3243b
│   │   ├── 72
│   │   │   └── e042c9105cf35e13f82e78783a13bdf6989332
│   │   ├── 75
│   │   │   └── 0b23635a06c521b5b62b169490b4b2e54c1008
│   │   ├── 7b
│   │   │   └── 33421211d440f5332d7c86f94bd6f6a02de887
│   │   ├── 7c
│   │   │   ├── 18b4dbe4125595323f123658d5c163fdac124b
│   │   │   ├── 794aae41aff30b6f9d22e702313dc48d01232a
│   │   │   └── 8e6c4ee1418151694f21657bc647effa320fd4
│   │   ├── 7d
│   │   │   ├── 86eb1694970141b88b52f5b26e6b019f16b590
│   │   │   └── ef5985ba4d1f9ca70b651608588ba5fa6024b5
│   │   ├── 7f
│   │   │   └── c6d0bbd9653d6f3cda175262991505af98f370
│   │   ├── 80
│   │   │   └── a6fd9dcafc0a153d9e6f3710d8b408aab296c3
│   │   ├── 82
│   │   │   └── 62fae1126a912bf73b1c06c1b0dcf182e178ac
│   │   ├── 87
│   │   │   └── 15acca833283a24f8e2c590846450db63a9375
│   │   ├── 88
│   │   │   ├── ad82769b87f10725c57dca6fcf41b4bffe462c
│   │   │   └── b0367aae421f51483c07ad7ae3ebc5251e48e5
│   │   ├── 89
│   │   │   └── 346c7454ac0c51e5b30dd41e79074af4b26430
│   │   ├── 8a
│   │   │   ├── 480d9b1fef0ec5b862df5446201c25b3f420e1
│   │   │   └── a49e2107c7038436da5bb7add96cd83c832d52
│   │   ├── 8b
│   │   │   └── 137891791fe96927ad78e64b0aad7bded08bdc
│   │   ├── 8c
│   │   │   └── 176bd123aff5c9284e99ee19707de9a207daf7
│   │   ├── 8d
│   │   │   └── e16732e7a2e1158009dfcc65af71d644680634
│   │   ├── 90
│   │   │   ├── ab95739f46c7f5202451c7e3ca971fe54f7ee1
│   │   │   └── afca635b8b3c4676ce46297d00be72285537a1
│   │   ├── 94
│   │   │   ├── 3bf4d3c3b59ec04bf3ebbdbc1e2890eac9edd4
│   │   │   ├── 67125ae2ecfd0ebaffbd53eb30698058077cff
│   │   │   ├── 68cb09e0b3de12cccaa1f39a0b3085d3273559
│   │   │   └── 93474f375a453df90519cc68e27b6b619550fa
│   │   ├── 95
│   │   │   ├── 234dd7cb623464a636b3c6620830949730074c
│   │   │   └── 7cfbc786ea6015aa91d95020475e00d54d135a
│   │   ├── 98
│   │   │   └── 7c7b33785d1ab481b3903239eae8ead805ec1b
│   │   ├── 99
│   │   │   └── 2841a1da7be1dd643db9bcc358bdcc68cb5848
│   │   ├── 9a
│   │   │   └── fa4bd857183037055de4d228c05c0c4c77c2b3
│   │   ├── 9c
│   │   │   ├── 2f1c97416e08396ccb18bd7d89792cdba27f68
│   │   │   └── 54e298b552b6ff6d0d182f2aed7dcba6f97c49
│   │   ├── 9e
│   │   │   └── f14bba45271af9ffc0116c1692c0ae331564f1
│   │   ├── a0
│   │   │   └── c963f428735f56803c05d4a44896df8f9669dc
│   │   ├── a2
│   │   │   └── 8af7ede86eba31239091d601b351fc5e5011b8
│   │   ├── a3
│   │   │   └── ecf8e6744fb39ac1d9c62b9bd2b6f81de2891a
│   │   ├── a8
│   │   │   ├── 5953d1740fa1070bcaf89f7db7994b3c3600cc
│   │   │   └── b7b34cb8b9a47f348b319c079d4f7874e366f4
│   │   ├── a9
│   │   │   └── e33c1d2ca904d3db9d21c311f213876fa30862
│   │   ├── ad
│   │   │   └── ab560857f2bbb371566d2c99f26a4d595a6f6b
│   │   ├── b3
│   │   │   └── 723d9f2fb0291775bc932158065e134259fc51
│   │   ├── b4
│   │   │   └── 5d150db4b24e1a9660e86aa3efc5cfe5e553de
│   │   ├── b8
│   │   │   └── f4cc8c0c0ff94c440ffeded0fc0eeb8c9ef3ee
│   │   ├── ba
│   │   │   └── 6cb258e0f33ffddffd24b18d7162a32cb9a6da
│   │   ├── bd
│   │   │   ├── 52469b569f74e8df2922fb7d63cc8576d4399f
│   │   │   ├── 9764ec0ea99ad3694ec0baf14aefec38182dfa
│   │   │   └── b6e3ae8a9ff416478c914cc76ac97ace83f44f
│   │   ├── bf
│   │   │   └── 35a862a61dc06c397d3314c9417e5c89821e36
│   │   ├── c2
│   │   │   └── 0a3ed5c47572874db52de10f7ab2ae69a9c036
│   │   ├── c3
│   │   │   └── 762f95d1bb381b303174bfb5e1397043d9a603
│   │   ├── c4
│   │   │   └── c6022f2982e8dae64cebd6b9a2b59f2547faad
│   │   ├── c5
│   │   │   └── 6c4542893799969f95e74f2171edbaad8c3d26
│   │   ├── c6
│   │   │   └── 28326a8462060ea44e644f4963b8b911445ec1
│   │   ├── c7
│   │   │   └── 9589d83dd5569afad3a4bf7dd96d97cfd52e57
│   │   ├── c8
│   │   │   └── 992e4ae4fbbc62f73efe8c1fb2c79e00f3c169
│   │   ├── c9
│   │   │   └── 50d4b8d0f2187d0bfba3db0aecdae51b4982f8
│   │   ├── ca
│   │   │   ├── 574e765c6d53a4d68a90711000f8b6fd48da50
│   │   │   └── e04eee2cd61c5a360755cb098e9f9b891cac2a
│   │   ├── cb
│   │   │   └── 480a65e75aeab8ac9cf17ae5f3ee3e66479b71
│   │   ├── cd
│   │   │   └── ec4ef320c18f346f614f6e6058594e2d69d323
│   │   ├── ce
│   │   │   └── 768f160de5b76b421b5fc8ce31214113f25bee
│   │   ├── cf
│   │   │   └── fe7b1868e00b4ea736138bbe96f6a33f3ef7a6
│   │   ├── d4
│   │   │   └── d05f8091dbaf832e73fd9ca0d3af83379a4078
│   │   ├── d6
│   │   │   └── 3bb5aced0406eaa9aa243251972172ca08b8b3
│   │   ├── d8
│   │   │   ├── 6a73797b033a22ea2efb2b5d859059198e512f
│   │   │   └── 82262f5f00e536b7b74e534c6a8c7d56e1b701
│   │   ├── db
│   │   │   ├── f96b7350ae1beb121df26e5468a6cbded51403
│   │   │   └── fa4ead963a89c83a1320ff396a86974d7e7440
│   │   ├── dd
│   │   │   └── 6f7906bd70fb5a5c07184306e882777219122b
│   │   ├── de
│   │   │   └── 71cd16a8a7f37774639874067a6937aaf72026
│   │   ├── df
│   │   │   └── fb99cd84e225ab64812a27f1633700a5fe07c9
│   │   ├── e1
│   │   │   └── bf3870508c36f72abbca1941d0b44e29478e6a
│   │   ├── e2
│   │   │   └── c6865f46a0b8172f7d6f8f05643be5b52c7f44
│   │   ├── e4
│   │   │   └── 79fb29349a12b564516c40aa529276c6c5e12d
│   │   ├── e5
│   │   │   └── 22719058705a6094d2d0dbdf13e510f729201b
│   │   ├── e6
│   │   │   └── 9de29bb2d1d6434b8b29ae775ad8c2e48c5391
│   │   ├── e8
│   │   │   ├── 6bead16ef066b83252df90550888f45c32e85b
│   │   │   ├── 7b34cf484e7b509229e350ea701d49386a6be3
│   │   │   └── f21f703f7bb4e9ab84daca93c9ee1d5358a316
│   │   ├── e9
│   │   │   └── 592af0e0c8e49f1f7fb5ba598a05eff4a9c72c
│   │   ├── ea
│   │   │   ├── 1376b06dd639efef62dd690734bea93cb9694e
│   │   │   └── 9da27fb665ed12459433042b480733a998dd53
│   │   ├── ee
│   │   │   └── 0eabf13419468bd9ed79850ca2fd8967884f6d
│   │   ├── ef
│   │   │   └── 02a18f3331fa060f26d0db80d716e56f08f1b8
│   │   ├── f0
│   │   │   └── 2c9d8d4c4e59a076b63ada67685d2ff127ace0
│   │   ├── f5
│   │   │   └── a6ad9616e2ac53d67b39a76d23b719bd006a3f
│   │   ├── f6
│   │   │   └── 247992514bb99f50c415dd3f999a43e9165210
│   │   ├── f7
│   │   │   └── 2c7449e26629c1f9c3c8ddd06290b0450821cb
│   │   ├── f8
│   │   │   └── c768b9e70870a672a01998a341c924cce247da
│   │   ├── fb
│   │   │   ├── 63a6a282a80d6e28dc9cfe1b29f3b7f135b8df
│   │   │   └── 9fae11fe9b2092b22569c357e384c3dfea5b53
│   │   ├── fc
│   │   │   └── 6c299b73e792ef288e785c22393a5df9dded4b
│   │   ├── fd
│   │   │   ├── 1afe79f18500b649de86566d6dfbf98fa7e0f9
│   │   │   └── 9c6cd0288dab9f576a7cb7ba65d8928313df02
│   │   ├── fe
│   │   │   └── 19835c616a361ff6e7c182fff0ab2119e818dc
│   │   ├── info
│   │   └── pack
│   ├── ORIG_HEAD
│   └── refs
│       ├── heads
│       │   └── master
│       ├── remotes
│       │   └── origin
│       │       ├── gh-pages
│       │       └── master
│       └── tags
├── .github
│   ├── .gitignore
│   ├── CONTRIBUTING.md
│   └── workflows
│       └── pkgdown.yaml
├── .gitignore
├── .Rbuildignore
├── .Rhistory
├── .Rproj.user
│   ├── 35B631FD
│   │   ├── bibliography-index
│   │   ├── cpp-definition-cache
│   │   ├── ctx
│   │   ├── explorer-cache
│   │   ├── pcs
│   │   │   ├── debug-breakpoints.pper
│   │   │   ├── files-pane.pper
│   │   │   ├── source-pane.pper
│   │   │   ├── windowlayoutstate.pper
│   │   │   └── workbench-pane.pper
│   │   ├── persistent-state
│   │   ├── presentation
│   │   ├── profiles-cache
│   │   ├── rmd-outputs
│   │   ├── saved_source_markers
│   │   ├── sources
│   │   │   ├── per
│   │   │   │   ├── t
│   │   │   │   │   ├── 06FE3C63
│   │   │   │   │   ├── 06FE3C63-contents
│   │   │   │   │   ├── 5FDF386F
│   │   │   │   │   ├── 5FDF386F-contents
│   │   │   │   │   ├── 622B348D
│   │   │   │   │   ├── 622B348D-contents
│   │   │   │   │   ├── 69B59400
│   │   │   │   │   ├── 69B59400-contents
│   │   │   │   │   ├── A73FB601
│   │   │   │   │   ├── A73FB601-contents
│   │   │   │   │   ├── DBBF10BC
│   │   │   │   │   └── DBBF10BC-contents
│   │   │   │   └── u
│   │   │   └── prop
│   │   │       ├── 08A28989
│   │   │       ├── 0BB4E3E5
│   │   │       ├── 13693628
│   │   │       ├── 29F9BEB5
│   │   │       ├── 62AEF134
│   │   │       ├── 6F3DE3A8
│   │   │       ├── 7E0E449F
│   │   │       ├── 8F6558E1
│   │   │       ├── A74D1CF1
│   │   │       ├── CB71F6D7
│   │   │       ├── D222BABD
│   │   │       ├── F160F14B
│   │   │       └── INDEX
│   │   ├── tutorial
│   │   ├── viewer-cache
│   │   └── viewer_history
│   └── shared
│       └── notebooks
│           ├── ABFEDDB4-vinieta_prueba
│           │   └── 1
│           │       ├── 35B631FD5ae6f5b
│           │       │   └── chunks.json
│           │       └── s
│           │           └── chunks.json
│           ├── patch-chunk-names
│           └── paths
├── CODE_OF_CONDUCT.md
├── data
│   └── datos.rda
├── data_raw
│   └── crea_datos.R
├── DESCRIPTION
├── docs
│   ├── 404.html
│   ├── articles
│   │   ├── index.html
│   │   └── vinieta_prueba.html
│   ├── authors.html
│   ├── deps
│   │   ├── bootstrap-5.3.1
│   │   │   ├── bootstrap.bundle.min.js
│   │   │   ├── bootstrap.bundle.min.js.map
│   │   │   └── bootstrap.min.css
│   │   ├── data-deps.txt
│   │   └── jquery-3.6.0
│   │       ├── jquery-3.6.0.js
│   │       ├── jquery-3.6.0.min.js
│   │       └── jquery-3.6.0.min.map
│   ├── index.html
│   ├── link.svg
│   ├── pkgdown.js
│   ├── pkgdown.yml
│   ├── reference
│   │   ├── datos.html
│   │   ├── index.html
│   │   ├── Rplot001.png
│   │   └── suma.html
│   ├── search.json
│   └── sitemap.xml
├── LICENSE
├── LICENSE.md
├── man
│   ├── datos.Rd
│   ├── fahrenheit_a_centigrados.Rd
│   └── suma.Rd
├── NAMESPACE
├── paqueteprueba.Rproj
├── R
│   ├── data.R
│   ├── fahrenheit_a_centigrados.R
│   └── suma.R
├── README.md
├── README.Rmd
├── tests
│   ├── testthat
│   │   ├── test-fahrenheit_a_centigrados.R
│   │   ├── test-suma.R
│   │   └── _snaps
│   └── testthat.R
├── vignettes
│   ├── .gitignore
│   └── vinieta_prueba.Rmd
└── _pkgdown.yml</code></pre>
</div>
</div>
<p>Además del los archivos DESCRIPTION, NAMESPACE y la carpeta R que ya presentamos, hay algunos archivos y carpetas ocultas. Conocés el .gitignore, pero .Rbuildignore y .Rproj.user son nuevos. El primero es parecido a .gitignore, incluye la lista de archivos y carpetas que R deberá ignorar al momento de construir el paquete, por ahora la lista es corta pero ira creciendo a medida que sumemos cosas al paquete. La carpeta .Rproj.user es algo que está en todo projecto de RStudio e incluye las configuraciones específicas del proyecto.</p>
<section id="completando-el-archivo-description" class="level3" data-number="10.5.1"><h3 data-number="10.5.1" class="anchored" data-anchor-id="completando-el-archivo-description">
<span class="header-section-number">10.5.1</span> Completando el archivo DESCRIPTION</h3>
<p>El archivo <code>DESCRIPTION</code> contiene los metadatos del paquete paquete y algunos parámetros de configuración que R utiliza al construirlo e instalarlo. El formato de los metadatos utiliza el patrón <code>key: value</code>. Así, por ejemplo, la clave <code>Package</code> tiene el valor <code>paqueteprueba</code>, que le dice a R cuál es el nombre del paquete. Asimismo, <code>Title</code> y <code>Authors</code> proporcionan un poco más de información sobre lo que hace el paquete y quién lo creó. Un archivo DESCRIPTION completo tiene muchas otros campos, alguns de los cuales no son importantes ya que son creadas automáticamente y usados internamente por R para propósitos generales durante la construcción del paquete. Otros, son bastante importantes. Específicamente, las claves <code>Title</code>, <code>Authors</code>, y <code>Description</code> deberían tener más valores más apropiados.</p>
<p>Los campos <code>Title</code> y <code>Description</code> describen lo que hace el paquete. Sólo se diferencian en la longitud:</p>
<ul>
<li>El <strong>título</strong> es una descripción del paquete en una línea, y a menudo se muestra en listados de paquetes. Debe ser texto plano (sin marcas), cada palabra en mayúsculas como un título, y NO terminar en un punto. Se breve: los listados suelen truncar el título a 65 caracteres.</li>
<li>La <strong>descripción</strong> es más detallada que el título. Puede utilizar varias frases, pero está limitado a un párrafo. Si la descripción abarca varias líneas (y así debe ser), cada una de ellas no debe superar los 80 caracteres. Deje 4 espacios entre las líneas siguientes.</li>
</ul>
<p>Por ejemplo el título y la descripción de ggplot2 tienen esta pinta:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Title</span><span class="kw">:</span><span class="at"> Create Elegant Data Visualisations Using the Grammar of Graphics</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">Description</span><span class="kw">:</span><span class="at"> A system for 'declaratively' creating graphics,</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="at">    based on "The Grammar of Graphics". You provide the data, tell 'ggplot2'</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="at">    how to map variables to aesthetics, what graphical primitives to use,</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="at">    and it takes care of the details.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>El campo <code>Authors@R</code> se utiliza para identificar al autoro autora del paquete, y a quién contactar si algo no funciona. Este campo es inusual porque contiene código R en lugar de texto plano. Este es un ejemplo:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Autores@R</span><span class="kw">:</span><span class="at"> person("Paola", "Corrales", email = "mimail@pao.com",</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="at">  role = c("aut", "cre"))</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Estamos usando la función <code><a href="https://rdrr.io/r/utils/person.html">person()</a></code> que viene con R base en el paquete <code>utils</code>.</p>
<div class="cell">
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/person.html">person</a></span><span class="op">(</span><span class="st">"Paola"</span>, <span class="st">"Corrales"</span>, email <span class="op">=</span> <span class="st">"mimail@pao.com"</span>,</span>
<span>  role <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"aut"</span>, <span class="st">"cre"</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Paola Corrales &lt;mimail@pao.com&gt; [aut, cre]"</code></pre>
</div>
</div>
<p>Esta función dice que Paola Corrales está a cargo de mantener el paquete (<code>cre</code>) y es autora (<code>aut</code>) y que su dirección de correo electrónico es <code>mimail@pao.com</code>. Es posible listar a más de una persona en este campo. La función <code><a href="https://rdrr.io/r/utils/person.html">person()</a></code> tiene cuatro argumentos principales:</p>
<ul>
<li><p>El nombre, especificado por los dos primeros argumentos, <code>given</code> y <code>family</code>. En la cultura occidental, <code>given</code> (nombre) va antes que <code>family</code> (apellido). En muchas otras culturas, esta convención no es válida. Para agregar una entidad, empresa u organización, como “R Core Team” o “Posit Software, PBC”, se usa el argumento <code>given</code> (y se omite <code>family</code>).</p></li>
<li><p>La dirección de <code>email</code>, es solo un requisito para quien mantiene el paquete. Es importante que uses una dirección de correo electrónico a la que tengas acceso permanente. La política de CRAN requiere que sea para una persona, en lugar de, por ejemplo, una lista de correo.</p></li>
<li>
<p>Uno o más códigos de tres letras especificando el <code>role</code>. Estos son los roles más importantes que hay que conocer:</p>
<ul>
<li><p><code>cre</code>: quien mantiene le paquete y la persona a la que deberías molestar si tenés problemas usandolo. A pesar de ser la abreviatura de «creator», este es el rol correcto para el mantenedor, incluso si no es la persona que inicialmente creó el paquete.</p></li>
<li><p><code>aut</code>: autores, aquellas personas que han hecho contribuciones significativas al paquete.</p></li>
<li><p><code>ctb</code>: contribuidores, aquellas personas que han hecho contribuciones menores, como parches.</p></li>
<li><p><code>cph</code>: titular de los derechos de autor. Se utiliza para listar titulares de copyright adicionales que no son autores, normalmente empresas, como un empleador de uno o más de los autores.</p></li>
<li><p>fnd`: financiador, las personas u organizaciones que han proporcionado apoyo financiero para el desarrollo del paquete.</p></li>
</ul>
</li>
<li><p>El argumento opcional <code>comment</code> se usa para incluir el <a href="https://orcid.org">identificador de ORCID</a>. Y es particularmente útil en el ámbito académico.</p></li>
</ul>
<div class="ejercicio">
<p>Es momento de empezar a darle forma al paquete.</p>
<ol type="1">
<li>Si aún no seguiste las instrucciones para crear el <code>paqueteprueba</code>, es el momento. No te preocupes por el nombre, este paquete es solo para practicar.</li>
<li>Abrí el projecto/paquete.</li>
<li>Abrí el archivo DESCRIPTION y completá los campos <code>Title</code>, <code>Authors</code>, y <code>Description</code>
</li>
</ol>
</div>
</section></section><section id="flujo-de-trabajo-para-el-desarrollo-de-paquetes" class="level2" data-number="10.6"><h2 data-number="10.6" class="anchored" data-anchor-id="flujo-de-trabajo-para-el-desarrollo-de-paquetes">
<span class="header-section-number">10.6</span> Flujo de trabajo para el desarrollo de paquetes</h2>
<p>Aunque hay varias formas de desarrollar un paquete R, un flujo de trabajo bien establecido y documentado gira en torno a hacer uso de <code>usethis</code> y <code>devtools</code>.</p>
<p>Los pasos típicos utilizados en este flujo de trabajo de desarrollo son:</p>
<ol type="1">
<li><p>Cuando tengas una idea de una función o conjunto de funciones similares, por por ejemplo, sumar 2 números, es momento de iniciar un nuevo script. Para eso escribí en la consola <code>usethis::use_r("suma")</code>. Se creará un nuevo archivo R en la carpeta <code>R/</code> y se abrirá en RStudio.</p></li>
<li><p>En este nuevo archivo podrás empezar a crear y desarrollar la función, escribiendo los argumentos de entrada y la eventual salida. Por ahora llegamos hasta acá pero pronto veremos como documentar la función.</p></li>
<li><p>Una vez que sienta que la función está lista para ser probada, podés probar la función ejecutándola en el mismo script, en la consola o en un archivo R Markdown. La otra alternativa para que la función esté disponible para R, es cargarla con <code>Ctrl-Shift-L</code> que ejecuta el comando <code>load_all()</code> (de <code>devtools</code>). Esto solo funciona porque estamos desarrollando un paquete.</p></li>
<li><p>A menos que la función que creaste sea muy simple es <em>muy</em> improbable que funcione perfectamente la primera, lo más probable es que la función exactamente como esperabas o de un error. En ese caso tendrás que modificarla, cargarla nuevamente con <code>load_all()</code> y probarla nuevamenta tantas veces como sea neceasario hasta conseguir los resultados que necesitas. función.</p></li>
</ol>
<p>Vamos a probar un poco de este flujo de trabajo haciendo una función de práctica. En la consola, escribí esta función:</p>
<div class="cell">
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="https://usethis.r-lib.org/reference/use_r.html">use_r</a></span><span class="op">(</span><span class="st">"funcion_prueba"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>A continuación se abrirá el recientemente creado archivo <code>R/funcion_prueba.R</code>. Escribí la función y guardá los cambios en el archivo.</p>
<div class="cell">
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">suma</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">x</span> <span class="op">+</span> <span class="va">y</span></span>
<span><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Antes de hacer nada, escribe <code>suma(2, 2)</code> en la Consola y apretá enter para ejecutarlo. ¿Qué ocurre? Nada. Eso es porque R no sabe que la función existe. Tenemos que hacer que R la conozca ya sea ejecutando la función directamente desde el script (<code>Ctrl-Enter</code> para enviar a la Consola), usando <code><a href="https://rdrr.io/r/base/source.html">source()</a></code> en el script, instalando el paquete, o imitando la instalación del paquete con la función <code>load_all()</code>. Como estamos desarrollando un paquete usaremos la función <code>load_all()</code>.</p>
<p>Vamos a probar la función <code>load_all()</code> con el atajo <code>Ctrl-Shift-L</code>. Ahora si, volvé a escribir <code>suma(2, 2)</code> en la consola. Ahora deberías ver que funciona.</p>
<div class="ejercicio">
<p><strong>Practiquemos el flujo de trabajo</strong></p>
<p>Ya que usarás este flujo de trabajo cuando hagas paquetes en R, es hora de que lo practiques.</p>
<p>Realiza los siguientes cambios en la función. Con cada cambio, vuelva a cargarla (<code>Ctrl-Shift-L</code> en RStudio o <code>load_all()</code> en la Consola) para que las funciones actualizadas estén disponibles. Después de cada cambio probá que la función haga lo que debe hacer.</p>
<ul>
<li><p>Agregá valores por defecto para los argumentos <code>x</code> e <code>y</code>. Probá correr la función sin pasarle argumentos: <code>suma()</code>.</p></li>
<li><p>Modificá la función para que chequee que los argumentos sean numéricos. Probá la función con <code>suma("1", 1)</code></p></li>
<li><p>Modifica nuevamente la función para que si <code>x</code> o <code>y</code> son negativos, la función devuelva “No puedo sumar negativos”.</p></li>
</ul>
</div>
<section id="datos-en-paquetes" class="level3" data-number="10.6.1"><h3 data-number="10.6.1" class="anchored" data-anchor-id="datos-en-paquetes">
<span class="header-section-number">10.6.1</span> Datos en paquetes</h3>
<p>Muchos paquetes de R incluyen datos, en algunos casos porque son útiles para mostrar como usar las funciones que incluye, en otros casos porque es el objetivo principal de ese paquete. El paquete <code>datos</code> es el mejor ejemplo de esto último.</p>
<p>En la mayoría de los casos los datos en el paquete estarán disponibles para que las personas los usen. Guardaremos estos datos en la carpeta <code>/data</code> y el flujo de trabajo usando <code>usethis</code> tendrá esta pinta:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Leer datos desde algún archivo</span></span>
<span><span class="co"># o generar datos</span></span>
<span></span>
<span><span class="co"># Manipular los datos para que tengan la pinta que necesitamos</span></span>
<span></span>
<span><span class="va">datos</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="fl">1000</span><span class="op">)</span></span>
<span><span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="https://usethis.r-lib.org/reference/use_data.html">use_data</a></span><span class="op">(</span><span class="va">datos</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>La función nos devolverá lo siguiente:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>✔ Adding <span class="st">'R'</span> to Depends field <span class="cf">in</span> DESCRIPTION</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>✔ Creating <span class="st">'data/'</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>✔ Setting LazyData to <span class="st">'true'</span> <span class="cf">in</span> <span class="st">'DESCRIPTION'</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>✔ Saving <span class="st">'datos'</span> to <span class="st">'data/datos.rda'</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>• Document your <span class="fu">data</span> (see <span class="st">'https://r-pkgs.org/data.html'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Es decir, automáticamente crea la carpeta y guarda los datos con formato <code>.rds</code> (un tipo de archivo específico de R). En principio el código de arriba solo se correrá una vez a menos que sea necesario actualizar los datos. Sin embargo es una buena idea guarda el código y los datos crudos si los hubiera en <code>data_raw</code>. Esta carpeta además no debe incluirse cuando se construye el paquete por lo que hay que agregarla a <code>Rbuildignore</code>.</p>
<p>Ahora si apretamos <code>Ctrl-Shift-L</code> para cargar de nuevo el paquete de prueba y escribimos <code>datos</code> en la consola veremos los datos que creamos.</p>
</section><section id="ex-paquete" class="level3" data-number="10.6.2"><h3 data-number="10.6.2" class="anchored" data-anchor-id="ex-paquete">
<span class="header-section-number">10.6.2</span> Construyendo un paquete de R paso a paso</h3>
<div class="ejercicio">
<p>Es hora de empezar a unir lo que hicimos. El objetivo de este ejercicio es crear la estructura de un paquete que lean y analice datos de estaciones meteorológicas. Pero además este será un trabajo colaborativo entre 2 personas para practicar como desarrollar software en equipo usando GitHub.</p>
<p><strong>Crear el paquete</strong></p>
<ol type="1">
<li><p>Piensen un nombre para el paquete, debe seguir las reglas pero no importa si se repite en otro ámbito.</p></li>
<li><p>El paquete debera estar en la cuenta de GitHub de una de las personas que integran el grupo. Decidan quien sera y realicen los siguientes pasos en la computadora de esa persona.</p></li>
<li><p>Creen la estructura del paquete con <code>usethis</code>.</p></li>
<li><p>Modifiquen el archivo DESCRIPTION con todo lo necesario.</p></li>
</ol>
<p><strong>Conectarlo con Git localmente</strong></p>
<ol type="1">
<li>Para crear el repositorio local corran la siguiente funcion de usethis en la consola de R con el proyecto del paquete abierto en RStudio en la maquina de la persona que seleccionaron para que tenga el repo en su cuenta:</li>
</ol>
<p><code><a href="https://usethis.r-lib.org/reference/use_git.html">usethis::use_git()</a></code></p>
<p>Esta funcion va a crear el repositorio y generara un commit inicial de todos los archivos que tiene el proyecto. Va a preguntarte si queres hacer esto. Contestale que si. Tambien va a reiniciar RStudio para que la pestaña de Git aparezca en nuestro proyecto. Va a preguntarte si queres hacer esto. Contestale que si.<br><br><strong>Crear el repo remoto en GitHub</strong></p>
<ol type="1">
<li>Con el proyecto del paquete abierto en RStudio en la computadora de la persona que tendra el repo en GitHub, corran la siguiente funcion de usethis en la consola:</li>
</ol>
<p><code><a href="https://usethis.r-lib.org/reference/use_github.html">usethis::use_github()</a></code></p>
<p>Esta funcion hace lo siguiente:</p>
<ul>
<li>Crea un nuevo repositorio en GitHub con el nombre del proyecto.</li>
<li>Configura ese nuevo repositorio como origen remoto para el repositorio local.</li>
<li>Configura tu branch local por defecto para realizar el mismo seguimiento en el origen y realiza un push inicial.</li>
<li>Abre el nuevo repositorio en tu navegador.</li>
</ul>
<p>Te presenta algo similar a esto en la consola:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>ℹ Defaulting to <span class="st">"https"</span> Git protocol.</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>✔ Creating GitHub repository <span class="st">"yabellini/inventarioRRNN"</span>. </span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>✔ Setting remote <span class="st">"origin"</span> to <span class="st">"https://github.com/yabellini/inventarioRRNN.git"</span>. </span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>✔ Adding <span class="st">"https://github.com/yabellini/inventarioRRNN"</span> to URL. </span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>✔ Adding <span class="st">"https://github.com/yabellini/inventarioRRNN/issues"</span> to BugReports. </span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>ℹ There is <span class="dv">1</span> uncommitted file<span class="sc">:</span> • DESCRIPTION <span class="sc">!</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>Is it ok to commit it?</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span> Absolutely not </span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span><span class="sc">:</span> Not now </span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span><span class="sc">:</span> Yes</span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>Selection<span class="sc">:</span> <span class="dv">3</span> </span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>✔ Adding files. </span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>✔ Making a commit with message <span class="st">"Add GitHub inks to DESCRIPTION"</span>. </span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>✔ Pushing <span class="st">"master"</span> branch to GitHub and setting <span class="st">"origin/master"</span> as upstream branch. </span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a>✔ Opening URL <span class="sc">&lt;</span>https<span class="sc">:</span><span class="er">//</span>github.com<span class="sc">/</span>yabellini<span class="sc">/</span>inventarioRRNN<span class="sc">&gt;</span>.</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ol start="3" type="1">
<li>Modificar la configuración del repositorio en GitHub para que la otra persona del grupo tenga permisos para hacer commits y push. Necesitarás sabes su nombre de usuario
<ol type="1">
<li><p>En GitHub.com, navega a la página principal del repositorio.</p></li>
<li>
<p>Hacé clic en <strong>Settings</strong>.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="https://docs.github.com/assets/cb-28260/images/help/repository/repo-actions-settings.png" class="img-fluid figure-img"></p>
<figcaption>Captura de pantalla de un encabezado de repositorio en el que se muestran las pestañas. La pestaña “Configuración” está resaltada con un contorno naranja oscuro.</figcaption></figure>
</div>
</li>
<li><p>En la sección “Access” de la barra lateral, haz clic en <strong>Colaborators</strong>.</p></li>
<li><p>Hacé clik en el botón verde <strong>Add people</strong>.</p></li>
<li><p>Comenzá a teclear el nombre de la persona que deseas invitar dentro del campo de búsqueda hasta que aparezca.</p></li>
<li><p>Hacé clikc en <strong>Add NOMBRE to this repository</strong>.</p></li>
<li><p>La persona recibirá un correo electrónico invitándole al repositorio. Una vez que acepte la invitación, tendrá acceso de colaborador a tu repositorio.</p></li>
</ol>
</li>
</ol>
<p>4. La otra persona del grupo ahora puede clonar el repo en su computadora, siguiendo los pasos que vimos en como trabajar individualmente.</p>
<ol start="5" type="1">
<li>Modificá el README.md para indicar que el paquete es de prueba, que no está pensado para ser usado como tal.</li>
</ol>
</div>


</section></section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./08_git-2.html" class="pagination-link" aria-label="Git para trabajar en equipo">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Git para trabajar en equipo</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./10_documentacion.html" class="pagination-link" aria-label="Documentando paquetes y funciones">
        <span class="nav-page-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Documentando paquetes y funciones</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>